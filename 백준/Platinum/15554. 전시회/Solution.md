# Solution

### 문제 접근
- 각 미술품은 $A_i$의 크기와 $B_i$의 가치를 가진다. 이 때, $S-(A_{max}-A_{min})$ 의 최댓값을 구해야 한다.
- 핵심 대전제는 다음과 같다.
  - 크기 순으로 미술품을 나열했을 때, 선택할 미술품 중 최소 크기를 갖는 것과 최대 크기를 갖는 것 사이 크기의 미술품들은 무조건 선택해야 최댓값을 구할 수 있다.
  - 따라서, 크기 순으로 미술품을 나열하고 최소 크기 미술품과 최대 크기 미술품을 선택하는 것이 해당 풀이의 핵심이다.
 
- i번째 미술품을 최소 크기 미술품으로 정하고 j번째 미술품을 최대 크기 미술품으로 정했을 때, 점화식은 다음과 같다.
  - S_i : 1~i번째 미술품까지의 누적 가치 합
  - A_i : i번째 미술품의 크기

$$ max(S_j - S_{i-1} - (A_j - A_i)) $$

- 위의 점화식은 다음과 같은 형태로 변환시킬 수 있다.

$$ max((S_j - A_j) - (S_{i-1} - A_i)) $$

- 위의 형태로 묶음으로써 앞의 함수는 j에만 의존하는 함수, 뒤의 함수는 i에만 의존하는 함수로 알고리즘을 짤 수 있다.
- 다르게 표현하면 다음과 같다.

$$ max(S_j - A_j) - min(S_{i-1} - A_i) $$


### 문제 풀이
- 알고리즘은 1부터 n까지 순회하면서 위의 점화식에 해당하는 max 값과 min 값을 구해주면 된다.

```java
long ret = 0, acc = 0, lo = 0;
for (int i = 0; i < n; ++i) {
    lo = Math.min(lo, acc - products.get(i).size);
    acc += products.get(i).value;
    ret = Math.max(ret, acc - products.get(i).size - lo);
}
```

- 위의 코드에서 lo는 min 값에 해당하고, acc는 $S_i$, ret은 결과값(점화식)이다.
